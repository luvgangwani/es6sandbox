<!-- Babel converts ES6 code to ES5 -->
<!DOCTYPE html>
<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.29/browser.js"></script>
	<style type="text/css">
	</style>
	<title>Building Promises</title>
</head>
<body>
</body>
	<script type="text/babel">
		const spacePeople = () => {
			return new Promise((resolve, reject) => {
				const api = "http://api.open-notify.org/astros.json"
				const request = new XMLHttpRequest()
				request.open('GET', api)
				request.onload = () => {
					if(request.status === 200){
						resolve(JSON.parse(request.response))
					}
					else{
						reject(new Error(request.status))
					}
				}
				request.onerror = () => {
					reject(new Error(repsonse.statusText))
				}
				request.send()
			})
		}

		spacePeople().then(
			spaceData => console.log(spaceData),
			err => console.error("Data cannot be loaded")
		)
	</script>
</html>